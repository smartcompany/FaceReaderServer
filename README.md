# ì„±ê²© ë¶„ì„ API ì„œë²„

AI ê¸°ë°˜ ì–¼êµ´ ì‚¬ì§„ ë¶„ì„ì„ í†µí•œ ì„±ê²© ë¶„ì„ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

## ğŸš€ ê¸°ëŠ¥

- **AI ê¸°ë°˜ ì„±ê²© ë¶„ì„**: ChatGPT Vision APIë¥¼ í™œìš©í•œ ì–¼êµ´ ì‚¬ì§„ ë¶„ì„
- **ì´ë¯¸ì§€ ìë™ ì—…ë¡œë“œ**: Supabase Storageë¥¼ í†µí•œ ì´ë¯¸ì§€ ê´€ë¦¬
- **êµ¬ì¡°í™”ëœ ë¶„ì„ ê²°ê³¼**: ì„±ê²© íŠ¹ì„±, ê°•ì /ì•½ì , ëŒ€ì¸ê´€ê³„ ìŠ¤íƒ€ì¼ ë“±
- **ê°œì¸ì •ë³´ ë³´í˜¸**: ì—…ë¡œë“œëœ ì´ë¯¸ì§€ëŠ” ë¶„ì„ í›„ ìë™ ì‚­ì œ
- **RESTful API**: í‘œì¤€ HTTP ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œ API ì„¤ê³„

## ğŸ“‹ ë¶„ì„ ë‚´ìš©

1. **ğŸ­ ì„±ê²© íŠ¹ì„±ê³¼ ê¸°ì§ˆ**: ì–¼êµ´ì˜ íŠ¹ì§•ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì„±ê²©ì˜ ì£¼ìš” íŠ¹ì„±
2. **ğŸ’ª ê°•ì ê³¼ ì•½ì **: ê°œì¸ì˜ ì¥ì ê³¼ ê°œì„  ê°€ëŠ¥í•œ ë¶€ë¶„
3. **ğŸ¤ ëŒ€ì¸ê´€ê³„ ìŠ¤íƒ€ì¼**: ì†Œí†µ ë°©ì‹ê³¼ ì¸ê°„ê´€ê³„ì—ì„œì˜ íŠ¹ì§•
4. **ğŸŒ± ë°œì „ ë°©í–¥**: ê°œì¸ì  ì„±ì¥ì„ ìœ„í•œ ì œì•ˆì‚¬í•­
5. **âœ¨ ë§¤ë ¥ í¬ì¸íŠ¸**: ê°œì¸ì˜ ê³ ìœ í•œ ë§¤ë ¥ê³¼ íŠ¹ì§•
6. **ğŸ’¡ ì¢…í•© ì¡°ì–¸**: ì „ì²´ì ì¸ ì„±ê²©ê³¼ ê°œì„  ë°©í–¥ì— ëŒ€í•œ ì¢…í•©ì ì¸ ì¡°ì–¸

## ğŸ› ï¸ ì„¤ì¹˜ ë° ì„¤ì •

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env.local` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•˜ì„¸ìš”:

```env
# OpenAI API ì„¤ì •
OPENAI_API_KEY=your_openai_api_key_here

# Supabase ì„¤ì •
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# ì„œë²„ ì„¤ì •
NODE_ENV=development
```

**OpenAI API í‚¤ ë°œê¸‰ ë°©ë²•:**
1. [OpenAI Platform](https://platform.openai.com/)ì— ê°€ì…
2. API Keys ì„¹ì…˜ì—ì„œ ìƒˆ í‚¤ ìƒì„±
3. ìƒì„±ëœ í‚¤ë¥¼ `OPENAI_API_KEY`ì— ì„¤ì •

**Supabase ì„¤ì • ë°©ë²•:**
1. [Supabase](https://supabase.com/)ì—ì„œ í”„ë¡œì íŠ¸ ìƒì„±
2. Storage ë²„í‚· ìƒì„± (ì´ë¦„: `face-reader`)
3. Storage ì •ì±… ì„¤ì • (ê³µê°œ ì½ê¸° ê¶Œí•œ)
4. Project Settings > APIì—ì„œ URLê³¼ Service Role Key ë³µì‚¬

### 3. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
```

ì„œë²„ëŠ” `http://localhost:3000`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

## ğŸ“¡ API ì‚¬ìš©ë²•

### ì„±ê²© ë¶„ì„ API

**ì—”ë“œí¬ì¸íŠ¸:** `POST /api/personality-analysis`

**ìš”ì²­:**
- Content-Type: `multipart/form-data`
- Body: `image` í•„ë“œì— ì´ë¯¸ì§€ íŒŒì¼ í¬í•¨

**ì‘ë‹µ:**
```json
{
  "success": true,
  "analysis": {
    "personality_traits": "ë¶„ì„ ë‚´ìš©...",
    "strengths_weaknesses": "ë¶„ì„ ë‚´ìš©...",
    "communication_style": "ë¶„ì„ ë‚´ìš©...",
    "growth_direction": "ë¶„ì„ ë‚´ìš©...",
    "charm_points": "ë¶„ì„ ë‚´ìš©...",
    "overall_advice": "ë¶„ì„ ë‚´ìš©..."
  },
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

**ì—ëŸ¬ ì‘ë‹µ:**
```json
{
  "error": "ì—ëŸ¬ ë©”ì‹œì§€",
  "details": "ìƒì„¸ ì—ëŸ¬ ì •ë³´"
}
```

### API ì •ë³´ ì¡°íšŒ

**ì—”ë“œí¬ì¸íŠ¸:** `GET /api/personality-analysis`

**ì‘ë‹µ:**
```json
{
  "message": "ì„±ê²© ë¶„ì„ API",
  "description": "ì´ë¯¸ì§€ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ AI ê¸°ë°˜ ì„±ê²© ë¶„ì„ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  "usage": "POST /api/personality-analysis with multipart/form-data containing image file",
  "requestFormat": {
    "image": "File (ì´ë¯¸ì§€ íŒŒì¼)"
  },
  "features": [
    "ì´ë¯¸ì§€ ìë™ ì—…ë¡œë“œ (Supabase Storage)",
    "ì„±ê²© íŠ¹ì„±ê³¼ ê¸°ì§ˆ ë¶„ì„",
    "ê°•ì ê³¼ ì•½ì  íŒŒì•…",
    "ëŒ€ì¸ê´€ê³„ ìŠ¤íƒ€ì¼ ë¶„ì„",
    "ê°œë°œ ë°©í–¥ ì œì•ˆ",
    "ë§¤ë ¥ í¬ì¸íŠ¸ ë¶„ì„"
  ]
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ì›¹ ì¸í„°í˜ì´ìŠ¤ í…ŒìŠ¤íŠ¸
ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000/test-api`ì— ì ‘ì†í•˜ì—¬ APIë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### cURL í…ŒìŠ¤íŠ¸
```bash
curl -X POST http://localhost:3000/api/personality-analysis \
  -F "image=@/path/to/your/image.jpg"
```

### JavaScript í…ŒìŠ¤íŠ¸
```javascript
const formData = new FormData();
formData.append('image', imageFile);

const response = await fetch('/api/personality-analysis', {
  method: 'POST',
  body: formData,
});

const result = await response.json();
console.log(result.analysis);
```

## ğŸ”’ ë³´ì•ˆ ë° ê°œì¸ì •ë³´

- ì—…ë¡œë“œëœ ì´ë¯¸ì§€ëŠ” Supabase Storageì— ì„ì‹œ ì €ì¥ í›„ ë¶„ì„ ì™„ë£Œ ì‹œ ìë™ ì‚­ì œ
- ì´ë¯¸ì§€ ë°ì´í„°ëŠ” ì™¸ë¶€ ì €ì¥ì†Œì— ì˜êµ¬ ë³´ê´€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- OpenAI APIë¥¼ í†µí•œ ë¶„ì„ë§Œ ìˆ˜í–‰ë˜ë©°, ë¡œì»¬ì— ë°ì´í„°ë¥¼ ë³´ê´€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

## ğŸš¨ ì£¼ì˜ì‚¬í•­

- OpenAI API ì‚¬ìš©ëŸ‰ì— ë”°ë¥¸ ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- Supabase Storage ì‚¬ìš©ëŸ‰ì— ë”°ë¥¸ ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ì´ë¯¸ì§€ íŒŒì¼ í¬ê¸°ëŠ” ì ì ˆí•œ ìˆ˜ì¤€ìœ¼ë¡œ ì œí•œí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤
- API í‚¤ëŠ” ì ˆëŒ€ ê³µê°œ ì €ì¥ì†Œì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

## ğŸ¤ ê¸°ì—¬

ë²„ê·¸ ë¦¬í¬íŠ¸ë‚˜ ê¸°ëŠ¥ ì œì•ˆì€ ì´ìŠˆë¡œ ë“±ë¡í•´ ì£¼ì„¸ìš”.
